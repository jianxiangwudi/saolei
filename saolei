注：非雷用0表示

本工程分为 "扫雷.h"“扫雷（运行）”和“扫雷（主）”三个项目

扫雷.h

#pragma once
#define ROW 9
#define COL 9
#define LEI 10
#define ROWS ROW+2
#define COLS COL+2
#include <stdlib.h>
#include <time.h>

void chushi(char saolei[ROWS][COLS],int rows,int cols,char set);
void dayin(char saolei[ROWS][COLS], int row, int col);
void bulei(char saolei[ROWS][COLS], int row, int col);
void sao(char saolei[ROWS][COLS],char psaolei[ROWS][COLS], int row, int col);
int tishi(char psaolei[ROWS][COLS],int x, int y);
void kuosan1(char saolei[ROWS][COLS], char psaolei[ROWS][COLS], int i, int j);
void kuosan2(char saolei[ROWS][COLS], char psaolei[ROWS][COLS], int i, int j);
void kuosan3(char saolei[ROWS][COLS], char psaolei[ROWS][COLS], int i, int j);
void kuosan4(char saolei[ROWS][COLS], char psaolei[ROWS][COLS], int i, int j);
void kuosan(char saolei[ROWS][COLS], char psaolei[ROWS][COLS], int i, int j);


#include <stdio.h>
 

扫雷（主）

#define _CRT_SECURE_NO_WARNINGS 1
#include "扫雷.h"
void play()
{
    char saolei[ROWS][COLS] = { 0 };
    char psaolei[ROWS][COLS] = { 0 };
    chushi(saolei, ROWS, COLS,'0');
    chushi(psaolei, ROWS, COLS, '*');
    dayin(psaolei, ROW, COL);
    

    bulei(saolei, ROW, COL);
    
    sao(saolei,psaolei, ROW, COL);

}
void menu()
{
    int a = 0;
    srand((unsigned int)time(NULL));

    printf("请选择是否进入游戏\n");
    printf("###################\n");
    printf("##1play###2cancel##\n");
    printf("###################\n");

    scanf("%d", &a);

    if (a == 1)
    {
        printf("即将进入扫雷游戏\n");
        /*system ("pause");*/
        play();
    }
    if (a == 2)
    {
        printf("游戏结束");

    }
}
int main()
{
    menu();

    return 0;
}

扫雷（运行）

#define _CRT_SECURE_NO_WARNINGS 1
#include "扫雷.h"
void chushi(char saolei[ROWS][COLS], int rows, int cols, char set)
{
     int i = 0;
     int j = 0;
     for (i = 0; i <rows; i++)
     {
         for (j = 0; j < cols; j++)
         {
             saolei[i][j] = set;
            }
         
     }
}

void dayin(char saolei[ROWS][COLS], int row, int col)
{
    int i = 0;
    int j = 0;
    for (i = 0; i <= row; i++)
    {
        for (j = 0; j <= col; j++)
        {

            if (i == 0)
            {
                printf("%d ", j);
            }
            
            else if (j == 0)
            {
                printf("%d ", i);
            }
            else
            {
                printf("%c ", saolei[i][j]);
            }

        }
        printf("\n");
    }
}

void bulei(char saolei[ROWS][COLS], int row, int col)
{
    int i = 0;
    int j = 0;
    int count = 0;
    for (count = 1; count <= LEI; count++)
    {
        i = rand() % 9 + 1;
        j = rand() % 9 + 1;
        if (saolei[i][j] != '1')
        {
            saolei[i][j] = '1';
        }
        else
            count--;
    }
}

int tishi(char psaolei[ROWS][COLS], int x, int y)
{
    return psaolei[x - 1][y - 1]
        + psaolei[x][y - 1]
        + psaolei[x + 1][y - 1]
        + psaolei[x - 1][y]
        + psaolei[x + 1][y]
        + psaolei[x - 1][y + 1]
        + psaolei[x][y + 1]
        + psaolei[x + 1][y + 1]
        - 8 * '0';
}

void sao(char saolei[ROWS][COLS], char psaolei[ROWS][COLS], int row, int col)
{
    int i = 0;
    int j = 0;
    int win = 0;
    
    while (win<ROW*COL-LEI)
    {
        scanf("%d%d", &i, &j);
        if (saolei[i][j] == '1')
        {
            printf("踩雷，游戏失败\n");
            dayin(saolei, ROW, COL);

            break;

        }
        else if (saolei[i][j] == '0'&&i>0&&j>0&&i<=row&&j<=col)
        {
             printf("游戏继续\n");            
            psaolei[i][j] = tishi(saolei, i, j) + '0';
            if (psaolei[i][j] == '0')
            {
                kuosan(saolei,psaolei,i,j);

            }
            dayin(psaolei, ROW, COL);

            win++;

        }
        else 
        {
            printf("输入坐标非法，请重新输入");

        }
        
    }
    if (win == ROW * COL - LEI)
    {
        printf("恭喜你，你成功了\n");
    }
}


void kuosan(char saolei[ROWS][COLS],char psaolei[ROWS][COLS],int i,int j)
{
    kuosan1(saolei, psaolei, i, j);
    kuosan2(saolei, psaolei, i, j);
    kuosan3(saolei, psaolei, i, j);
    kuosan4(saolei, psaolei, i, j);
    

}
void kuosan1(char saolei[ROWS][COLS], char psaolei[ROWS][COLS], int i, int j)
{
    psaolei[i - 1][j] = tishi(saolei, i - 1, j) + '0';
    if (psaolei[i - 1][j] == '0'&&i-1<ROWS&&i-1>0&&j<COLS&&j>0)
    {
        
        kuosan1(saolei, psaolei, i - 1, j);
        if (psaolei[i - 1][j - 1] != '0' && saolei[i - 1][j - 1] == '0' && j - 1 > 0 && j - 1 < COLS)
        {
            kuosan2(saolei, psaolei, i - 1, j);
        }
        if (psaolei[i - 1][j + 1] != '0' && saolei[i - 1][j + 1] == '0' && j + 1 > 0 && j + 1 < COLS)

        {
            kuosan3(saolei, psaolei, i - 1, j);
        }

    }
}
void kuosan2(char saolei[ROWS][COLS], char psaolei[ROWS][COLS], int i, int j)
{
        psaolei[i][j -1] = tishi(saolei, i, j - 1) + '0';
        if (psaolei[i ][j - 1] == '0'&&i<ROWS&&i>0&&j-1<COLS&&j-1>0)
        {
            kuosan1(saolei, psaolei, i, j - 1);
            kuosan2(saolei, psaolei, i, j - 1);
            kuosan4(saolei, psaolei, i, j - 1);

        }
}
void kuosan3(char saolei[ROWS][COLS], char psaolei[ROWS][COLS], int i, int j)
{
    psaolei[i][j + 1] = tishi(saolei, i, j + 1) + '0';
    if (psaolei[i][j + 1] == '0'&&i<ROWS&&i>0&&j+1<COLS&&j+1>0)
    {
        kuosan3(saolei, psaolei, i, j + 1);
        kuosan1(saolei, psaolei, i, j + 1);
        kuosan4(saolei, psaolei, i, j + 1);

    }
}
void kuosan4(char saolei[ROWS][COLS], char psaolei[ROWS][COLS], int i, int j)
{
    psaolei[i+1][j] = tishi(saolei, i+1, j) + '0';
    if (psaolei[i+1][j] == '0' && i + 1 < ROWS && i+1 > 0 && j < COLS && j>0)
    {
        kuosan4(saolei, psaolei, i + 1, j);
        if (psaolei[i + 1][j - 1] != '0' && saolei[i + 1][j - 1] == '0' && j - 1 > 0 && j - 1 < COLS)
        {
            kuosan2(saolei, psaolei, i + 1, j);
        }
        if (psaolei[i + 1][j + 1] != '0' && saolei[i + 1][j + 1] == '0' && j + 1 > 0 && j + 1 < COLS)
        {
            kuosan3(saolei, psaolei, i + 1, j);
        }
    }
}
